<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no">
	  
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

	<link rel="stylesheet" href="/stylesheets/vendor.css" />
    <link rel="stylesheet" href="/stylesheets/style.css" />

    <title>매물 올리기</title>
	<script src="/javascripts/loginHeader.js"></script>
	
	
	 
	<script>
		$(document).ready(function() {
			var loginStatus = localStorage.getItem('status');
			loginHeader(loginStatus);
		});
		
	</script>
	<style>
		.thumb{
			visibility : hidden;
		}
	</style>


	
  </head>
  <body>

    <!-- header -->
    <header class="header header-dark header-sticky separator-bottom">
      <div class="container">
        <div class="row">
          <nav class="navbar navbar-expand-lg navbar-dark">
            <a href="/" class="navbar-brand order-1 order-lg-2"><img src="/images/givingtree_logo.svg" style="width:120px;" alt="Logo"></a>
            <button class="navbar-toggler order-2" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarMenu" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse order-3 order-lg-1" id="navbarMenu">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item"><a class="nav-link" href="/">Home</a></li>	  
              </ul>
            </div>

           <!--로그인 하고 난 후 상태바-->
            <div class="collapse navbar-collapse order-5 order-lg-3" id="navbarMenu2">
              <ul class="navbar-nav ml-auto">
				<li class="nav-item">
                  <a id ="before_login" class="nav-link logingroup" href="/login">로그인</a>
                  <a id ="after_login" class="nav-link logingroup" href="/login">로그아웃</a>
                </li>
				<li class="nav-item">
                  <a id= "after_login_user" class="nav-link logingroup" href="/mypage">나의 기빙트리</a>
                  <a id="after_login_admin" class="nav-link logingroup" href="/mypage_admin">기빙트리 관리</a>
                </li>
              </ul>
            </div>
			<!--끝-->
          </nav>
        </div>
      </div>
    </header>


    <!-- 제목 -->
    <section style="background-color:#304635">
      <div class="container">
        <div class="row">
          <div class="col text-center">
            <h1 style="padding-top:50px; color:white">매물 올리기</h1>
          </div>
        </div>
      </div>
    </section>


	
	<section class="card">
		<div class="container">
            <div class="row">
				<!-- 왼쪽 칼럼 -->
                <div class="col-md-7">
					<div class="row pb-5">
						<!-- 기본정보 -->
						<div class="row">
							<h4 class="h3 mb-0"><span class="text-muted">01.</span> 기본 정보</h4>
							<div class="w-100"></div>
							<div class="row">
							<div class="col-md pt-5">
								<h5 class="front">정면샷</h5>
								<img id="file1_img" class="thumb" src="#"/>
								<div class="imgUp">
									<label class="btn btn-primary">업로드<input id="file1" type="file" class="uploadFile img" value="Upload Photo" style="width: 30px;height: 0px; overflow: hidden"></label>
								</div>
							</div>
							<div class="col-md pt-5">
								<h5 class="front">후면샷</h5>
								<img id="file2_img" class="thumb" src="#"/>
								<div class="imgUp">
									<label class="btn btn-primary">업로드<input id="file2" type="file" class="uploadFile img" value="Upload Photo" style="width: 30px;height: 0px; overflow: hidden"></label>
								</div>
							</div>
							<div class="col-md pt-5">
								<h5 class="front">측면샷</h5>
								<img id="file3_img" class="thumb" src="#"/>
								<div class="imgUp">
									<label class="btn btn-primary">업로드<input id="file3" type="file" class="uploadFile img" value="Upload Photo" style="width: 30px;height: 0px; overflow: hidden"></label>
								</div>
							</div>
						</div>
							<div class="row">
								<div class="col-md" style="width: 400px">
									<label for="productName" style="padding-top:20px">상품 이름</label>
									<input type="text" class="form-control" id="productName" placeholder="상품 이름을 입력해주세요.">
									<label for="description" style="padding-top:20px">상품 설명</label>
									<textarea class="form-control" id="description" rows="4" placeholder="상품 설명을 입력해주세요."></textarea>
								</div>
								<div class="col-md">
									<label class="form-label" style="padding-top:20px">사이즈</label>
									<div class="col">
									 <select id="sizeid" class="form-select" style="width: 200px;">
								 	 <option selected>사이즈를 선택해주세요.</option>
								 	 <option value="S">S</option>
									 <option value="M">M</option>
									 <option value="L">L</option>
								 	 <option value="XL">XL</option>
								 	 <option value="XXL">XXL</option></select>
									</div>
									<div class="form-group col-md">
										<label for="length" style="padding-top:20px">총장</label>
										<input type="text" class="form-control" id="length">
										<label for="width" style="padding-top:20px">가로단면</label>
										<input type="text" class="form-control" id="width">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!--공백-->
				<div class="col-1"></div> 
				<!--오른쪽 구역-->
				<div class="col-md-4">
					<div class="row pb-5">
						<!-- 드래그바 -->
						<div class="row">
							<h4 class="h3 mb-0"><span class="text-muted">02.</span> 상품상태</h4>
							<div class="w-100"></div>
							<div class="row">
								<div class="col-12">
								<div class="form-group pt-5" id="slider">
									<div class="range row">
										<label class="col" for="condition">늘어남</label>								
										<input  type="range" class="form-range col-6" value="0" min="0" max="100" step="10" id="customRange1" oninput="this.nextElementSibling.value = this.value">
										<output style="padding-left:10px; width:40px">0</output>
									</div>
									<div class="range row">
										<label  class="col" for="condition">세탁횟수</label>								
										<input type="range" class="form-range col-6" value="0" min="0" max="100" step="10" id="customRange2" oninput="this.nextElementSibling.value = this.value">
										<output style="padding-left:10px; width:40px">0</output>
									</div>
									<div class="range row">
										<label class="col" for="condition">구매시점</label>								
										<input type="range" class="form-range col-6" value="0" min="0" max="100" step="10" id="customRange3" oninput="this.nextElementSibling.value = this.value">
										<output style="padding-left:10px; width:40px">0</output>
									</div>
									<div class="range row">
										<label class="col" for="condition">색바램</label>								
										<input type="range" class="form-range col-6" value="0" min="0" max="100" step="10" id="customRange4" oninput="this.nextElementSibling.value = this.value">
										<output style="padding-left:10px; width:40px">0</output>
									</div>
									<div class="range row">
										<label class="col" for="condition">손상개수</label>								
										<input type="range" class="form-range col-6" value="0" min="0" max="100" step="10" id="customRange5" oninput="this.nextElementSibling.value = this.value">
										<output style="padding-left:10px; width:40px">0</output>
									</div>
									<div class="range row">
										<label class="col" for="condition">보풀</label>								
										<input type="range" class="form-range col-6" value="0" min="0" max="100" step="10" id="customRange6" oninput="this.nextElementSibling.value = this.value">
										<output style="padding-left:10px; width:40px">0</output>
									</div>
								</div>
								

							</div>
							<div class="w-100"></div>
							<!--상품 가격-->
							<div class="row">
								<div class="col-md pt-5">
									<h4 class="h3 mb-0"><span class="text-muted">03.</span> 상품 가격</h4>
									<div class="form-group">
										<label for="length">가격</label>
										<input id="productPrice" type="text" class="form-control" id="length">
									</div>
								</div>
							</div>
							<div class="w-100"></div>
								<!--기부율 버튼-->
							<div class="col-md-12" style="padding-top:20px;">
								<div id="admin_upload">
									<div id="btn_upload" class="btn btn-block btn-lg btn-primary" onclick='location.href="/agreement"'>기부율 설정하기</div>
              					</div>	
							</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
    </section>

	  
    


	<!-- footer -->
    <footer class="bg-dark text-white py-0">
      <div class="container">
        <div class="row separated">
		  <!-- 왼쪽 칼럼 -->
          <div class="col-lg-6 py-10">
            <div class="row">
              <div class="col-md-8">
                <p>Thank you for visiting <a class="underline">The Giving Tree.</a><br>The more you share, the richer your life is, the giving tree. </p>
              </div>
            </div>
			<!--퀵링크 박스-->
            <div class="row">
              <div class="col-md-10">
                <h4 class="eyebrow mb-2">Quick Links</h4>
                <ul class="list-group list-group-columns">
                  <li class="list-group-item"><a href="about.html">About</a></li>
                  <li class="list-group-item"><a href="contact.html">Contact Us</a></li>
                  <li class="list-group-item"><a href="faq.html">FAQ</a></li>
                  <li class="list-group-item"><a href="blog.html">Blog</a></li>
                  <li class="list-group-item"><a href="text.html">Terms of Use</a></li>
                </ul>
              </div>
            </div>
          </div>
		  <!-- 오른쪽 칼럼 -->
          <div class="col-lg-6 py-10">
			<!-- 구독하기 : Subscribe -->
            <div class="row justify-content-end">
              <div class="col-lg-10">
                <h4 class="eyebrow mb-2">Subscribe</h4>
                <div class="input-group">
                  <input type="text" class="form-control form-control-lg" placeholder="Email" aria-label="Subscribe" aria-describedby="button-addon2">
                  <div class="input-group-append">
                    <button class="btn btn-white" type="button" id="button-addon2">Subscribe</button>
                  </div>
                </div>
              </div>
            </div>
			<!-- 구독하기 : FOLLOW US -->
            <div class="row justify-content-end">
              <div class="col-lg-10">
                <h4 class="eyebrow mb-2">Follow us</h4>
                <nav class="nav nav-icons">
                  <a class="nav-link" href="#!"><i class="icon-facebook-o"></i></a>
                  <a class="nav-link" href="#!"><i class="icon-twitter-o"></i></a>
                  <a class="nav-link" href="#!"><i class="icon-youtube-o"></i></a>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- / footer -->

    <script src="javascripts/vendor.min.js"></script>
    <script src="javascripts/app.js"></script>
	  
	<script>
		console.log(JSON.parse(localStorage.getItem("uploadData")));
		$(".uploadFile").change(function(){
			console.log(this.id);
			let file_image = '#' + this.id + '_img';
			console.log(file_image);
    		readURL(this, file_image);
		});
		
		function readURL(input, file_image) {
			if (input.files && input.files[0]) {
				var reader = new FileReader();

				reader.onload = function (e) {
					$(file_image).attr('src', e.target.result);
					$(file_image).css('width', '150px');
					$(file_image).css('visibility', 'visible');
				}

				reader.readAsDataURL(input.files[0]);
			}
		}
		
		$('#btn_upload').click( function() {
			let fileInfo1 = $('#file1')[0].files[0];
			let fileInfo2 = $('#file2')[0].files[0];
			let fileInfo3 = $('#file3')[0].files[0];
			
			async function getImages(fileInfo1, fileInfo2, fileInfo3) {
				let imageString1 = await ImageRead(fileInfo1);
				let imageString2 = await ImageRead(fileInfo2);
				let imageString3 = await ImageRead(fileInfo3);

				function ImageRead(fileInfo) {
					return new Promise (function(resolve, reject) {
						let reader = new FileReader();
						reader.onload = function(e) {
							resolve(e.target.result);
						};
						reader.onerror = reject;
						reader.readAsDataURL(fileInfo);
					});
				};
				return [imageString1, imageString2, imageString3]
			};
			
			let images = getImages(fileInfo1, fileInfo2, fileInfo3);
			
			images.then(function(results) {
				let data = {
					"name": $('#productName').val(),
					"description": $('#description').val(),
					"image1": results[0],
					"image2": results[1],
					"image3": results[2],
					"size1": $('#sizeid').val(),
					"size2": parseInt($('#length').val()),
					"size3": parseInt($('#width').val()),
					"status1": parseInt($('#customRange1').val()),
					"status2": parseInt($('#customRange2').val()),
					"status3": parseInt($('#customRange3').val()),
					"status4": parseInt($('#customRange4').val()),
					"status5": parseInt($('#customRange5').val()),
					"status6": parseInt($('#customRange6').val()),
					"price1": parseInt($('#productPrice').val()),
				}
				console.log(data);
				localStorage.setItem("uploadData", JSON.stringify(data));
				location.href="/agreement";
				
			});
			// console.log(image1);
			
			
			
		});
	</script>
  </body>
</html>